{% extends 'carbono/base.html' %}
{% load static %}
{% block content %}
<div class='center'>
<h1>Calculadora de Carbono</h1>

<h2>Dados do Carro</h2>
<form method="POST">
    {% csrf_token %}
    
    <!-- Display all Car objects -->
    {% for carro in carros %}
    <div>
        <p><strong>{{ carro.legenda }}</strong></p>
        <label for="km_per_month_{{ carro.id }}">Km percorrido por mês:</label>
        <input type="number" id="km_per_month_{{ carro.id }}" name="km_per_month_{{ carro.id }}" required><br>
    </div>
    {% endfor %}
    
    <button type="submit">Calcular Carro</button>
</form>

{% if car_data %}
    <h2>Resultados do Carro</h2>
    <ul>
    {% for key, value in car_data.items %}
      <li>{{ key }}: {{ value }}</li>
    {% endfor %}
    </ul>
{% endif %}

<h2>Dados de Energia</h2>
<form method="POST">
    {% csrf_token %}

    <!-- Display all Energia objects -->
    <select name="energy_type" id="energy_type" required>
        <option value="">-- Escolha um modo de cálculo --</option>
        {% for energia in energias %}
            <option value="{{ energia.id }}">{{ energia.legenda }}</option>
        {% endfor %}
    </select><br><br>
    
    {% if selected_energy %}
        {% if selected_energy.modo_de_calculo == 'kWh' %}  
            <label for="kwh_used">kWh usados:</label>
            <input type="number" id="kwh_used" name="kwh_used" required><br>
        {% elif selected_energy.modo_de_calculo == 'Conta de Energia' %}
            <label for="bill_amount">Valor da conta:</label>
            <input type="number" id="bill_amount" name="bill_amount" required><br>
        {% endif %}
    {% endif %}

    <button type="submit">Calcular Energia</button>
</form>

{% if energy_data %}
    <h2>Resultados de Energia</h2>
    <ul>
        {% for key, value in energy_data.items %}
            <li>{{ key }}: {{ value }}</li>
        {% endfor %}
    </ul>
{% endif %}
  </div>

<style>
  .center {
    margin: auto;
    width: 60%;
    border: 3px solid #a5addb;
    padding: 10px;
  }
</style>

{% endblock %}